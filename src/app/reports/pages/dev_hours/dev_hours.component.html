<div class="filter-container">
  <form [formGroup]="filterForm" (ngSubmit)="filterReport()">
    <!-- Developer filter -->
    <label for="developer">Developer:</label>
    <input
      id="developer"
      formControlName="developer"
      placeholder="Developer Name"
    />

    <!-- Category filter -->
    <label for="category">Category:</label>
    <input
      id="category"
      formControlName="category"
      placeholder="Category"
    />

    <button type="submit">Filter</button>
    <button type="button" (click)="clearFilters()">Clear</button>
  </form>
</div>

<div class="developers-container">
  <div *ngFor="let developer of groupedData" class="developer-section">
    <!-- Expand/collapse button -->
    <button class="toggle-btn" (click)="toggleExpand(developer.developer)">
      {{ developer.developer }} ({{ developer.records.length }} records)
    </button>

    <div
      *ngIf="expandedDevelopers.includes(developer.developer)"
      class="records-container"
    >
      <table class="records-table">
        <thead>
          <tr>
        <th>Category</th>
        <th>Module</th>
        <th>Form</th>
        <th>Hours</th>
        <th>Fecha</th>
        <th>Activity</th>
        <th>Import (â‚¬)</th>
        <th>Approved?</th>
          </tr>
        </thead>
        <tbody>
          <!-- Loop over each record for this developer -->
          <tr *ngFor="let record of developer.records">
        <td>{{ record.categoria }}</td>
        <td>{{ record.modulo }}</td>
        <td>{{ record.formulario_pantalla }}</td>
        <td>{{ record.horas_trabajadas }}</td>
        <td>{{ record.fecha | date: 'yyyy-MM-dd' }}</td>
        <td>{{ record.registro_actividad }}</td>
        <td>{{ record.importe }}</td>
        <td>{{ record.aprobado_por_comision ? 'Yes' : 'No' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
