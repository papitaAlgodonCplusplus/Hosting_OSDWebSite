<div class="h-full flex justify-end items-end flex-col">
    <div class="w-full text-darkslategray text-start py-3 text-xl font-medium animate__animated animate__fadeInLeft">
        <span class="pl-8 pr-3 py-1 bg-yellow-500 rounded-r-full whitespace-nowrap overflow-hidden">
            {{'transparent_project' | translate}} <i class="fa-solid fa-project-diagram"></i></span>
    </div>
    <div *ngIf="openSideBar"
        class="fixed top-0 left-0 flex py-3 pl-1 bg-white w-6 h-full border-r-2 animate__animated animate__fadeInLeft">
        <div (click)="toggleSideBar()" class="text-darkslategray absolute left-6 top-1/2 transform -translate-y-1/2">
            <i class="fa-solid fa-chevron-right cursor-pointer"></i>
        </div>
    </div>


    <div *ngIf="!openSideBar"
        class="h-screen py-10 px-2 shadow-lg fixed left-0 left-sidebar open border-r-2 bg-white overflow-y-auto max-h-screen animate__animated animate__fadeInLeft w-72">
        <div class="text-end text-darkslategray text-xl">
            <i (click)="toggleSideBar()" class="cursor-pointer animate-pulse fa-solid fa-xmark"></i>
        </div>

        <shared-input-field [readOnly]="readOnly" class="w-full md:w-1/3" fieldName="economicBudget"
            label="{{'economicBudget' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
        <shared-input-field [readOnly]="readOnly" class="w-full md:w-1/3" fieldName="expectedTimes"
            label="{{'expectedTimes' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
        <shared-input-field [readOnly]="readOnly" class="w-full lg:w-full " fieldName="startDate"
            label="{{'start_date' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
        <shared-input-field [readOnly]="readOnly" class="w-full md:w-1/3" fieldName="endDate"
            label="{{'end_date' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
        <shared-input-field [readOnly]="readOnly" class="w-full md:w-1/3" fieldName="projectAmount"
            label="{{'project_amount' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
        <shared-input-field [readOnly]="readOnly" class="w-full md:w-1/3" fieldName="expensesEmployeesVolunteers"
            label="{{'expenses_employees_volunteers' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
        <shared-input-field [readOnly]="readOnly" class="w-full md:w-1/3" fieldName="supplierExpensesPurchases"
            label="{{'supplier_purchasing_expenses' | translate}}:" inputType="text" [formGroup]="formProjectManager"
            [bgColor]="'bg-white-lightbone'"></shared-input-field>
    </div>
    <div class="w-full flex-1 space-y-3 flex justify-center flex-col">
        <div class="flex flex-col p-3 items-center justify-center space-y-3">
            <div class="flex flex-col items-center">
                <label for="objectivesDropdown">{{"Objective" | translate}}</label>
                <select class="border rounded-xl bg-white text-line p-2 w-64">
                    <option value="" disabled selected hidden>{{ 'Filtrar por Área de trabajo' | translate }}
                    </option>
                    <option *ngFor="let project of (Projects$ | async)" (click)="selectProject($event)"
                        [value]="project.Id">
                        {{ project.Objective }}
                    </option>
                </select>
            </div>
            <div *ngIf="isAdmin" class="flex flex-row items-center justify-center font-medium">
                <button class="text-darkslategray p-2 rounded-xl hover:underline"
                    routerLink="/project-manager/create-project"> {{'RegisterProject' | translate}}</button>
                <button class="text-darkslategray p-2 rounded-xl hover:underline" (click)="openModal()">
                    {{'Registrar resumen de actuación' | translate}}
                </button>
            </div>
            <button *ngIf="!isUser" class="bg-darkslategray p-2 rounded-lg text-line text-sm"
                routerLink="/project-manager/assigned-performance">
                {{'Ver mis actuaciones Asignadas' | translate}}
            </button>
        </div>

        <div class="w-full p-10 flex flex-col justify-center space-y-3">
            <div class="text-darkslategray text-center text-xl mt-3 font-bold">
                <h1>
                    {{'performances' | translate}}
                </h1>
            </div>
            <div class="text-center text-xs font-extralight flex flex-row justify-end items-center space-x-3 px-1">
                <span class="m-1 cursor-pointer border-b" (click)="sortDateLowestHighest(true)">
                    {{ 'date_low_to_major' | translate }}
                </span>
                <span class="m-1 cursor-pointer border-b" (click)="sortDateLowestHighest(false)">
                    {{ 'date_major_to_minor' | translate }}
                </span>
                <div class="flex items-center justify-end space-x-3" *ngIf="isAdmin">
                    <div *ngIf="showOptions" class="animate__animated animate__fadeInRight flex flex-row space-x-3">
                        <i (click)="cleanPerformance()" routerLink="/project-manager/performance-buy"
                            class="cursor-pointer px-2 py-1 fa-solid fa-cart-shopping text-xl bg-line text-darkslategray rounded-full"></i>
                        <i routerLink="/project-manager/performance-free-professional" (click)="cleanPerformance()"
                            class="cursor-pointer px-2 py-1 fa-solid fa-user-tie text-xl bg-line text-darkslategray rounded-full"></i>
                    </div>
                    <button class="flex items-center bg-darkslategray p-2 rounded-lg text-line text-sm"
                        (click)="showOptionsPerformance()">
                        <i class="fas animate-pulse pr-3 "
                            [ngClass]="{'fa-chevron-right' : showOptions, 'fa-chevron-left':!showOptions}"></i>
                        {{'CreatePerformance' | translate}}
                    </button>
                </div>
            </div>
            <table class="table-auto w-full">
                <thead>
                    <tr class="text-darkslategray font-normal border-b text-start">
                        <th class=""></th>
                        <th class="">{{'Code' | translate}}</th>
                        <th class="">{{'TypePerformance' | translate}}</th>
                        <th class="">{{'Summary' | translate}}</th>
                        <th class="">{{'Date' | translate}}</th>
                        <th class="">{{'Hours' | translate}}</th>
                        <th class="">{{'Amount' | translate}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="font-light text-center" *ngFor="let performance of displayedItems; let i = index">
                        <td routerLink="/project-manager/performance-buy"
                            class="text-darkslategray font-medium text-s border-y px-2 py-2 hover:underline cursor-pointer"
                            (click)="selectPerformance(performance.Id)" *ngIf="performance.Type === '-'"><i
                                class="fa-solid fa-eye"></i></td>
                        <td routerLink="/project-manager/performance-free-professional"
                            class="text-darkslategray font-medium  text-s border-y px-2 py-2 hover:underline cursor-pointer"
                            (click)="chargePerformanceFP(performance.Id)" *ngIf="performance.Type !== '-'"><i
                                class="fa-solid fa-eye"></i></td>
                        <td class="border-y px-2 py-2">GETP/{{1}}/A/{{i+1}}/2024</td>
                        <td class="border-y px-2 py-2">{{performance.Type}}</td>
                        <td class="border-y px-2 py-2">{{performance.Summary}}</td>
                        <td class="border-y px-3 py-2">{{ performance.Date | date:'dd-MM-yyyy' }}</td>
                        <td class="border-y px-3 py-2">{{performance.Hours}}</td>
                        <td class="border-y px-3 py-2"> {{performance.Amount}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <mat-paginator [length]="allPerformances.length" [pageSize]="10" (page)="onPageChange($event)"></mat-paginator>
    </div>
    <div class="flex flex-row space-x-3 justify-end py-3 px-3">
        <button [routerLink]="isUser ? '/home' : '/reports'"
            class="bg-line font-medium p-2 rounded-xl flex items-center text-darkslategray">
            {{'regresar' | translate}}
        </button>
    </div>
</div>

<div *ngIf="loadProjectManager" class="fixed inset-0 z-50 flex items-center justify-center overflow-y-auto">
    <div class="bg-opacity-75 bg-black absolute inset-0 "></div>
    <div class="relative z-50 space-y-1 ">
        <div class="justify-center text-white">
            <i class="fa-solid fa-arrow-rotate-right animate-spin"></i> {{'Loading' | translate}}
        </div>
    </div>
</div>

<summary-type-modal *ngIf="isModalOpen" (close)="isModalOpen = false"></summary-type-modal>