<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold text-gray-800 mb-4">ðŸ“Š Presupuesto y Costes</h1>

  <!-- Courses Table -->
  <h2 class="text-xl font-semibold text-gray-800 mt-4">ðŸ“š Cursos Asociados</h2>
  <table class="w-full table-auto mt-2 border-collapse border border-gray-300">
    <thead>
      <tr class="bg-gray-200">
        <th class="border p-2">TÃ­tulo</th>
        <th class="border p-2">Costo (EUR)</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let course of courses">
        <td class="border p-2 text-gray-700">{{ course.title }}</td>
        <td class="border p-2 text-gray-700">{{ course.cost | number:'1.0-0' }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Budget Form -->
  <form [formGroup]="budgetForm">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
      <div>
        <label for="pricePerStudent" class="block text-sm font-medium text-gray-700">
          ðŸ’µ Precio por Alumno (EUR)
        </label>
        <input type="text"
          [value]="budgetForm.get('pricePerStudent')?.value | number:'1.0-0'"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Modo de Curso</label>
        <input
          type="text"
          [value]="courses[0]?.mode"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>

      <div>
        <label for="otherExpenses" class="block text-sm font-medium text-gray-700">
          ðŸ’¼ Otros Gastos (EUR)
        </label>
        <input
          type="text"
          formControlName="otherExpenses"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
    </div>

    <!-- Distribution Percentages -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
      <div>
        <label class="block text-sm font-medium text-gray-700">% OSD</label>
        <input
          type="text"
          [value]="distribution.osdPerc + '%'"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">% Profesor</label>
        <input
          type="text"
          [value]="distribution.profPerc + '%'"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">% CFH</label>
        <input
          type="text"
          [value]="distribution.cfhPerc + '%'"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
    </div>

    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700">
          ðŸ‘¥ NÂ° de Alumnos Inscritos
        </label>
        <input
          type="text"
          [value]="accountingEntries.length"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">
          ðŸ“ˆ Ingresos Totales (EUR)
        </label>
        <input
          type="text"
          formControlName="totalIncome"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">
          ðŸ“š Gastos de Profesores (EUR)
        </label>
        <input
          type="text"
          formControlName="professorExpenses"
          class="w-full p-2 border rounded bg-gray-100 cursor-not-allowed"
          readonly
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">
          ðŸ’° Beneficio Neto (EUR)
        </label>
        <input
          type="text"
          formControlName="netProfit"
          class="w-full p-2 border rounded bg-green-100 font-bold cursor-not-allowed"
          readonly
        />
      </div>
    </div>
  </form>

  <!-- Accounting Entries Table -->
  <h2 class="text-xl font-semibold text-gray-800 mt-8">ðŸ“š Detalle de Alumnos</h2>
  <form [formGroup]="accountingForm">
    <table class="w-full table-auto mt-4 border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-200">
          <th class="border p-2">Nombre</th>
          <th class="border p-2">Curso Matriculado</th>
          <th class="border p-2">Asistencia (%)</th>
          <th class="border p-2">CalificaciÃ³n</th>
          <th class="border p-2">Estado</th>
        </tr>
      </thead>
      <tbody formArrayName="accountingEntries">
        <tr
          *ngFor="let entry of accountingEntries.controls; let i = index"
          [formGroupName]="i"
        >
          <td class="border p-2">
            <input
              type="text"
              formControlName="name"
              class="w-full p-1 border rounded bg-gray-100 cursor-not-allowed"
              readonly
            />
          </td>
          <td class="border p-2">
            <input
              type="text"
              formControlName="course_name"
              class="w-full p-1 border rounded bg-gray-100 cursor-not-allowed"
              readonly
            />
          </td>
          <td class="border p-2">
            <input
              type="text"
              formControlName="attendance"
              class="w-full p-1 border rounded bg-gray-100 cursor-not-allowed"
              readonly
            />
          </td>
          <td class="border p-2">
            <input
              type="text"
              formControlName="grade"
              class="w-full p-1 border rounded bg-gray-100 cursor-not-allowed"
              readonly
            />
          </td>
          <td class="border p-2">
            <input
              type="text"
              formControlName="status"
              class="w-full p-1 border rounded bg-gray-100 cursor-not-allowed"
              readonly
            />
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>
